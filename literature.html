<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-start justify-center p-6">

  <div class="w-full max-w-3xl bg-white rounded-2xl shadow p-6">
    <h1 class="text-2xl font-bold text-indigo-700 flex items-center gap-2 mb-4">
      üéì –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞
    </h1>
    <p id="instruction" class="text-sm text-gray-600 mb-6">
      –ü–æ–∑–Ω–∞–π –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ—Ç–æ –ø–æ –¥–∞–¥–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏.
    </p>

    <div id="question-container" class="space-y-4 mb-6"></div>

    <div class="flex items-center justify-between mb-4">
      <button id="check-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg">–ü—Ä–æ–≤–µ—Ä–∏</button>
      <span class="text-gray-700 text-sm">–¢–æ—á–∫–∏: <span id="score">0</span></span>
    </div>

    <div class="text-center">
      <button id="next-btn" class="hidden bg-green-600 text-white px-4 py-2 rounded-lg">–ü—Ä–æ–¥—ä–ª–∂–∏</button>
    </div>

    <div id="message" class="hidden text-center mt-4 text-lg font-semibold"></div>

    <div id="end-screen" class="hidden text-center mt-8">
      <h2 class="text-xl font-bold text-indigo-700 mb-2">–ö—Ä–∞–π –Ω–∞ –∏–≥—Ä–∞—Ç–∞!</h2>
      <p class="mb-4">–¢–≤–æ—è—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç: <span id="final-score" class="font-semibold"></span> —Ç–æ—á–∫–∏</p>
      <button id="restart-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg">–ò–≥—Ä–∞–π –æ—Ç–Ω–æ–≤–æ</button>
    </div>
  </div>

<script>
/* –î–∞–Ω–Ω–∏ –æ—Ç —É—á–µ–±–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª */
const literatureData = [
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ñ–µ–ª–µ–∑–Ω–∏—è—Ç —Å–≤–µ—Ç–∏–ª–Ω–∏–∫","–ê–≤—Ç–æ—Ä":"–î–∏–º–∏—Ç—ä—Ä –¢–∞–ª–µ–≤","–ñ–∞–Ω—Ä":"–†–æ–º–∞–Ω","–¢–µ–º–∞":"–†–æ–¥–Ω–æ—Ç–æ –∏ —á—É–∂–¥–æ—Ç–æ","–ì–µ—Ä–æ–∏":"–°—É–ª—Ç–∞–Ω–∞, –õ–∞–∑–∞—Ä, –°—Ç–æ—è–Ω, –ù–∏—è, –†–∞—Ñ–µ" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ë–∞–π –ì–∞–Ω—å–æ","–ê–≤—Ç–æ—Ä":"–ê–ª–µ–∫–æ –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω–æ–≤","–ñ–∞–Ω—Ä":"–§–µ–π–ª–µ—Ç–æ–Ω","–¢–µ–º–∞":"–†–æ–¥–Ω–æ—Ç–æ –∏ —á—É–∂–¥–æ—Ç–æ","–ì–µ—Ä–æ–∏":"–ë–∞–π –ì–∞–Ω—å–æ, –ì–æ—á–æ–æ–ª—É, –î–æ—á–æ–æ–ª—É" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ë–∞–ª–∫–∞–Ω—Å–∫–∏ —Å–∏–Ω–¥—Ä–æ–º","–ê–≤—Ç–æ—Ä":"–°—Ç–∞–Ω–∏—Å–ª–∞–≤ –°—Ç—Ä–∞—Ç–∏–µ–≤","–ñ–∞–Ω—Ä":"–î—Ä–∞–º–∞","–¢–µ–º–∞":"–†–æ–¥–Ω–æ—Ç–æ –∏ —á—É–∂–¥–æ—Ç–æ","–ì–µ—Ä–æ–∏":"–î–∏—Ä–µ–∫—Ç–æ—Ä—ä—Ç, –ü–µ–ø–æ, –ü—Ä–æ—Ñ–µ—Å–æ—Ä—ä—Ç" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ü–∞–∏—Å–∏–π","–ê–≤—Ç–æ—Ä":"–ò–≤–∞–Ω –í–∞–∑–æ–≤","–ñ–∞–Ω—Ä":"–û–¥–∞","–¢–µ–º–∞":"–ú–∏–Ω–∞–ª–æ—Ç–æ –∏ –ø–∞–º–µ—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ò—Å—Ç–æ—Ä–∏—è","–ê–≤—Ç–æ—Ä":"–ù–∏–∫–æ–ª–∞ –í–∞–ø—Ü–∞—Ä–æ–≤","–ñ–∞–Ω—Ä":"–õ–∏—Ä–∏—á–µ—Å–∫–æ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ","–¢–µ–º–∞":"–ú–∏–Ω–∞–ª–æ—Ç–æ –∏ –ø–∞–º–µ—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ë–æ—Ä–±–∞","–ê–≤—Ç–æ—Ä":"–•—Ä–∏—Å—Ç–æ –ë–æ—Ç–µ–≤","–ñ–∞–Ω—Ä":"–°–æ—Ü–∏–∞–ª–Ω–æ-–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ","–¢–µ–º–∞":"–û–±—â–µ—Å—Ç–≤–æ—Ç–æ –∏ –≤–ª–∞—Å—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ê–Ω–¥—Ä–µ—à–∫–æ","–ê–≤—Ç–æ—Ä":"–ï–ª–∏–Ω –ü–µ–ª–∏–Ω","–ñ–∞–Ω—Ä":"–†–∞–∑–∫–∞–∑","–¢–µ–º–∞":"–û–±—â–µ—Å—Ç–≤–æ—Ç–æ –∏ –≤–ª–∞—Å—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"–ê–Ω–¥—Ä–µ—à–∫–æ, –°—ä–¥–∏—è—Ç–∞" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ü—Ä–∏–∫–∞–∑–∫–∞ –∑–∞ —Å—Ç—ä–ª–±–∞—Ç–∞","–ê–≤—Ç–æ—Ä":"–•—Ä–∏—Å—Ç–æ –°–º–∏—Ä–Ω–µ–Ω—Å–∫–∏","–ñ–∞–Ω—Ä":"–°–∞—Ç–∏—Ä–∏—á–µ–Ω —Ä–∞–∑–∫–∞–∑","–¢–µ–º–∞":"–û–±—â–µ—Å—Ç–≤–æ—Ç–æ –∏ –≤–ª–∞—Å—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"–ú–ª–∞–¥–∏—è—Ç —á–æ–≤–µ–∫" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–î–æ –º–æ–µ—Ç–æ –ø—ä—Ä–≤–æ –ª–∏–±–µ","–ê–≤—Ç–æ—Ä":"–•—Ä–∏—Å—Ç–æ –ë–æ—Ç–µ–≤","–ñ–∞–Ω—Ä":"–õ–∏—Ä–∏—á–µ—Å–∫–æ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ","–¢–µ–º–∞":"–ñ–∏–≤–æ—Ç—ä—Ç –∏ —Å–º—ä—Ä—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ù–æ–≤–æ—Ç–æ –≥—Ä–æ–±–∏—â–µ –Ω–∞–¥ –°–ª–∏–≤–Ω–∏—Ü–∞","–ê–≤—Ç–æ—Ä":"–ò–≤–∞–Ω –í–∞–∑–æ–≤","–ñ–∞–Ω—Ä":"–õ–∏—Ä–∏—á–µ—Å–∫–æ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ","–¢–µ–º–∞":"–ñ–∏–≤–æ—Ç—ä—Ç –∏ —Å–º—ä—Ä—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ö—Ä–∞–¥–µ—Ü—ä—Ç –Ω–∞ –ø—Ä–∞—Å–∫–æ–≤–∏","–ê–≤—Ç–æ—Ä":"–ï–º–∏–ª–∏—è–Ω –°—Ç–∞–Ω–µ–≤","–ñ–∞–Ω—Ä":"–ü–æ–≤–µ—Å—Ç","–¢–µ–º–∞":"–ñ–∏–≤–æ—Ç—ä—Ç –∏ —Å–º—ä—Ä—Ç—Ç–∞","–ì–µ—Ä–æ–∏":"–ò–≤–æ, –ï–ª–∏—Å–∞–≤–µ—Ç–∞" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ü—Ä–∏ –†–∏–ª—Å–∫–∏—è –º–∞–Ω–∞—Å—Ç–∏—Ä","–ê–≤—Ç–æ—Ä":"–ò–≤–∞–Ω –í–∞–∑–æ–≤","–ñ–∞–Ω—Ä":"–õ–∏—Ä–∏—á–µ—Å–∫–æ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ","–¢–µ–º–∞":"–ü—Ä–∏—Ä–æ–¥–∞—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–ì—Ä–∞–¥—É—à–∫–∞","–ê–≤—Ç–æ—Ä":"–ü–µ–π–æ –Ø–≤–æ—Ä–æ–≤","–ñ–∞–Ω—Ä":"–ü–æ–µ–º–∞","–¢–µ–º–∞":"–ü—Ä–∏—Ä–æ–¥–∞—Ç–∞","–ì–µ—Ä–æ–∏":"" },
  { "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ":"–°–ø–∏ –µ–∑–µ—Ä–æ—Ç–æ","–ê–≤—Ç–æ—Ä":"–ü–µ–Ω—á–æ –°–ª–∞–≤–µ–π–∫–æ–≤","–ñ–∞–Ω—Ä":"–õ–∏—Ä–∏—á–µ—Å–∫–∞ –º–∏–Ω–∏–∞—Ç—é—Ä–∞","–¢–µ–º–∞":"–ü—Ä–∏—Ä–æ–¥–∞—Ç–∞","–ì–µ—Ä–æ–∏":"" }
];

/* –û—Å–Ω–æ–≤–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ */
let score = 0;
let used = new Set();
let currentRow = null;

/* –ü–æ–º–æ—â–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ */
function normalize(txt){
  return txt.toLowerCase().replace(/[‚Äû‚Äú"‚Äù'.,!?]/g,'').trim();
}
function match(a,b){
  a = normalize(a); b = normalize(b);
  return a && b && (a.includes(b) || b.includes(a));
}

/* –°—Ç–∞—Ä—Ç–∏—Ä–∞ –Ω–æ–≤–∞ –∏–≥—Ä–∞ */
function startGame(){
  score = 0;
  used.clear();
  document.getElementById("score").textContent = score;
  document.getElementById("end-screen").classList.add("hidden");
  nextRound();
}

/* –°–ª–µ–¥–≤–∞—â –≤—ä–ø—Ä–æ—Å */
function nextRound(){
  const container = document.getElementById("question-container");
  container.innerHTML = "";
  document.getElementById("message").classList.add("hidden");
  document.getElementById("next-btn").classList.add("hidden");

  if (used.size === literatureData.length){
    endGame();
    return;
  }

  let row;
  do {
    row = literatureData[Math.floor(Math.random()*literatureData.length)];
  } while(used.has(row["–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ"]));
  used.add(row["–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ"]);
  currentRow = row;

  // –∫–∞–≤–∏—á–∫–∏
  let title = row["–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ"];
  if (!title.startsWith("‚Äû")) title = `‚Äû${title}‚Äú`;

  // –∞–∫–æ –∞–≤—Ç–æ—Ä—ä—Ç —Å–µ –ø–æ–≤—Ç–∞—Ä—è, –ø–æ–∫–∞–∑–≤–∞–º–µ –ê–≤—Ç–æ—Ä + –¢–µ–º–∞
  const sameAuthorCount = literatureData.filter(r=>r["–ê–≤—Ç–æ—Ä"]===row["–ê–≤—Ç–æ—Ä"]).length;
  const show = new Set();

  if (sameAuthorCount > 1){
    show.add("–ê–≤—Ç–æ—Ä"); show.add("–¢–µ–º–∞");
    document.getElementById("instruction").textContent = "–ü–æ–∑–Ω–∞–π –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ—Ç–æ –ø–æ –∞–≤—Ç–æ—Ä–∞ –∏ —Ç–µ–º–∞—Ç–∞.";
  } else {
    const all = ["–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ","–ê–≤—Ç–æ—Ä","–ñ–∞–Ω—Ä","–¢–µ–º–∞","–ì–µ—Ä–æ–∏"];
    while(show.size<2) show.add(all[Math.floor(Math.random()*all.length)]);
    document.getElementById("instruction").textContent = "–ü–æ–∑–Ω–∞–π –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ—Ç–æ –ø–æ –¥–∞–¥–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏.";
  }

  const fields = ["–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ","–ê–≤—Ç–æ—Ä","–ñ–∞–Ω—Ä","–¢–µ–º–∞","–ì–µ—Ä–æ–∏"];
  fields.forEach(f=>{
    const div = document.createElement("div");
    div.className = "text-lg";
    div.innerHTML = `<strong>${f === "–ì–µ—Ä–æ–∏" ? "–ì–µ—Ä–æ–π" : f}:</strong> `;
    const val = row[f] || "";

    if (show.has(f)){
      div.innerHTML += `<span class="text-indigo-700 font-medium">${val}</span>`;
    } else if (val){
      div.innerHTML += `<input type="text" data-answer="${val}" class="border-b border-gray-400 focus:border-indigo-500 w-3/4 outline-none"> <span class='text-sm text-gray-500'>(${f})</span>`;
    } else {
      div.innerHTML += `<span class="text-gray-400 italic">‚Äî</span>`;
    }
    container.appendChild(div);
  });
}

/* –ü—Ä–æ–≤–µ—Ä–∫–∞ */
function checkAnswers(){
  const inputs = document.querySelectorAll("input[data-answer]");
  if (!inputs.length){ nextRound(); return; }
  let correct = 0;

  inputs.forEach(inp=>{
    const right = inp.dataset.answer;
    const val = inp.value;
    inp.classList.remove("border-red-500","border-green-500");
    const old = inp.parentNode.querySelector(".text-green-600");
    if (old) old.remove();

    if (match(val,right)){
      inp.classList.add("border-green-500");
      correct++;
    } else {
      inp.classList.add("border-red-500");
      const span = document.createElement("span");
      span.className = "text-green-600 ml-2";
      span.textContent = `–í—è—Ä–Ω–æ: ${right}`;
      inp.parentNode.appendChild(span);
    }
  });

  score += correct;
  document.getElementById("score").textContent = score;

  const msg = document.getElementById("message");
  msg.classList.remove("hidden");
  msg.textContent = `–í—è—Ä–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä–∏: ${correct} / ${inputs.length}`;
  document.getElementById("next-btn").classList.remove("hidden");
}

/* –ö—Ä–∞–π */
function endGame(){
  document.getElementById("question-container").innerHTML = "";
  document.getElementById("message").classList.add("hidden");
  document.getElementById("next-btn").classList.add("hidden");
  const end = document.getElementById("end-screen");
  end.classList.remove("hidden");
  document.getElementById("final-score").textContent = score;
}

/* –°—ä–±–∏—Ç–∏—è */
document.getElementById("check-btn").addEventListener("click", checkAnswers);
document.getElementById("next-btn").addEventListener("click", nextRound);
document.getElementById("restart-btn").addEventListener("click", startGame);

/* –°—Ç–∞—Ä—Ç */
startGame();
</script>
</body>
</html>
